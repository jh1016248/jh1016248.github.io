(function(t){function e(e){for(var i,s,o=e[0],c=e[1],l=e[2],p=0,h=[];p<o.length;p++)s=o[p],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&h.push(n[s][0]),n[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(h.length)h.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],i=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(i=!1)}i&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var i={},n={matrix:0},r=[];function s(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=i,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;r.push([2,"chunk-vendors"]),a()})({"0c92":function(t,e,a){},2:function(t,e,a){t.exports=a("8f08")},"30a4":function(t,e,a){"use strict";var i="",n=i,r={getById:n+"/delayAlertDetail/getById",delete:n+"/delayAlertDetail/delete",getMonitorChartData:n+"/delayAlertDetail/getMonitorChartData",list:n+"/delayAlertDetail/list",listByIds:n+"/delayAlertDetail/listByIds",page:n+"/delayAlertDetail/page",save:n+"/delayAlertDetail/save",batchConfirm:n+"/delayAlertDetail/batchConfirm"},s={getById:n+"/delayAlertTask/getById",delete:n+"/delayAlertTask/delete",list:n+"/delayAlertTask/list",listByIds:n+"/delayAlertTask/listByIds",page:n+"/delayAlertTask/page",save:n+"/delayAlertTask/save"},o={delaySelect:n+"/delayMap/delaySelect",getCityMap:n+"/delayMap/getCityMap",getDelayList:n+"/delayMap/getDelayList",getNeMap:n+"/delayMap/getNeMap",getStationMap:n+"/delayMap/getStationMap",batchSavePosition:"/service-zhwg-topo/position/batchSave"},c={getProvinceMatrix:n+"/matrix/getProvinceMatrix",getCityMatrix:n+"/matrix/getCityMatrix",getStationMatrix:n+"/matrix/getStationMatrix",getNeMatrix:n+"/matrix/getNeMatrix"};e["a"]={DelayAlertDetail:r,DelayAlertTask:s,DelayMap:o,DelayMatrix:c}},"6dd4":function(t,e,a){"use strict";var i=a("86e6"),n=a.n(i);n.a},"78ba":function(t,e,a){"use strict";var i=a("5c96"),n=a.n(i),r=a("7e43"),s=a("58fb"),o=a.n(s),c=(a("0fae"),a("49fc"),a("778b"),a("f5df"),a("0c92"),{system:{add:"44956663630340458bd5b253b079a0c3",edit:"4d6771f3b67749de88682cdc8a0d2f03",delete:"f9a0557f13ec4f2e95dca91f75bcba80",view:"04b21a6edb604f499f1b5beb5c45936d",query:"9fb9a0c431ef418783114c67b993af00",systemViews:"dd254d9c592a435296d47e2807d5f30d",export:"c81d5b442d264ca59623c4453108cb7d"},systemSeg:{add:"8942239d35ec4715b467241838584dda",edit:"90679c7dcf9946c3be0caea2e495a07f",delete:"d7e872eddf32465c930ef0848fc17d20",view:"d6a6a3c7d5044e808ce523f7503a9c87",query:"5b693b5d92654e5287f0847e1b95169f",export:"564adffed0cc420f94f9cce8949589f4"}}),l=c,d=function(t,e){var a=t.prototype.PERMISSION_CONSTANT;t.prototype.PERMISSION_CONSTANT=a?Object.assign({},a,l):l,n.a.install(t,e),o.a.install(t,e),r["b"].install(t,e)};e["a"]={install:d}},"86e6":function(t,e,a){},"8f08":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var i=a("a026"),n=a("2f62");i["default"].use(n["a"]);var r=new n["a"].Store({state:{routeIndex:"",subnetId:"",childrenSubnetId:""},mutations:{setRouteIndex:function(t,e){t.routeIndex=e}},actions:{}}),s=r,o=a("78ba"),c=a("30a4"),l=a("bc3a"),d=a.n(l),p=a("5c96"),h=d.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_BASE_API,timeout:3e4});h.interceptors.request.use((function(t){return t}),(function(t){return console.log(t),Promise.reject(t)})),h.interceptors.response.use((function(t){var e=t.data;return 200!==e.code&&1e3!==e.code?(Object(p["Message"])({message:e.message||"Error",type:"error",duration:5e3}),e):e}),(function(t){return console.log("err"+t),Object(p["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)}));var u=h,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"main",attrs:{id:"app"}},[a("kt-base",[t._v("时延地图")]),a("chart")],1)},y=[],g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"crumbs"},[t.routes.length?[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.handleCrumb(0)}}},[a("i",{staticClass:"el-icon-location"}),t._v("全国\n            ")]),t._l(t.routes,(function(e,i){return a("span",{key:e.id,class:{isLink:i!==t.routes.length-1},on:{click:function(e){return t.handleCrumb(i+1)}}},[a("span",{staticStyle:{margin:"0 5px",color:"#999"}},[t._v("/")]),a("span",{staticStyle:{color:"#666","font-size":"14px"}},[t._v(t._s(t.getRouteName(e)))])])}))]:a("span",[a("i",{staticClass:"el-icon-location"}),t._v("全国")])],2),a("div",{ref:"charts",attrs:{id:"charts"}}),t.showShape?a("div",{staticClass:"shape-box",style:this.shapeStyle},[t._v(t._s(t.shape.value))]):t._e(),a("div",{staticClass:"map-tools no-select"},[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-checkbox",{on:{change:t.resetChart},model:{value:t.showLabel,callback:function(e){t.showLabel=e},expression:"showLabel"}},[t._v("显示时延值")])],1)])])},m=[],x=(a("8e6e"),a("456d"),a("ade3")),v=(a("96cf"),a("1da1")),b=(a("ac6a"),a("313e")),w=a.n(b);function M(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function D(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?M(Object(a),!0).forEach((function(e){Object(x["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var O={components:{},data:function(){return{currentIndex:0,routes:[],typeList:["3","0","1","2"],apiList:[this.$API.DelayMatrix.getProvinceMatrix,this.$API.DelayMatrix.getCityMatrix,this.$API.DelayMatrix.getStationMatrix,this.$API.DelayMatrix.getNeMatrix],routeIds:[],yHighLight:[],xHighLight:[],showLabel:!1,inflows:[],xData:[],yData:[],xIndexMap:[],yIndexMap:[],xDataMap:{},yDataMap:{},shape:{index:"",value:""}}},computed:{hightLightList:function(){return this.xHighLight.concat(this.yHighLight)},showShape:function(){var t=this.shape.index;return!(!t&&0!==t)&&(!this.showLabel&&-1==this.hightLightList.indexOf(t))},shapeStyle:function(){return this.shape.width?{width:this.shape.width+"px",height:this.shape.height+"px",left:this.shape.x+"px",lineHeight:this.shape.height+"px",top:this.shape.y+"px"}:{}},computedSeries:function(){var t=this,e=this.inflows;return e.forEach((function(e){e.label.show=t.showLabel})),[{name:"城市-城市",type:"heatmap",data:e,label:{normal:{show:this.showLabel,textStyle:{color:"#000",fontSize:9}}},itemStyle:{borderWidth:1,borderColor:"#999999",emphasis:{shadowBlur:10,shadowColor:"rgba(0,0,0,.5)"}}}]}},methods:{getRouteName:function(t){return t.map((function(t){return t.pname})).join("-")},handleReset:function(){},handleCrumb:function(t){t!==this.currentIndex&&(this.currentIndex=t,this.routes=this.routes.slice(0,t),this.getData())},getData:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(){var e,a,i,n,r,s,o,c,l,d,p,h,u,f,y,g=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.7)"}),a=this.currentIndex,i=this.routes,n=this.typeList,r=[{id:"1",pname:"广东"},{id:"2",pname:"北京"}],s=[{id:"3",pname:"上海"},{id:"4",pname:"重庆"}],o=[{aid:1,zid:3,val:1,type:1},{aid:1,zid:4,val:2,type:1},{aid:2,zid:3,val:3,type:1},{aid:2,zid:4,val:4,type:1}],1==a&&(r=[{id:"5",pname:"广州"},{id:"6",pname:"深圳"}],s=[{id:"7",pname:"佛山"},{id:"8",pname:"清远"}],o=[{aid:5,zid:7,val:5,type:1},{aid:6,zid:7,val:8,type:1},{aid:5,zid:8,val:2,type:1},{aid:6,zid:8,val:10,type:1}]),2==a&&(r=[{id:"11",pname:"广州钟落潭"},{id:"12",pname:"广州电信大厦"}],s=[{id:"13",pname:"广州较场西"},{id:"14",pname:"东莞鸿福"}],o=[{aid:11,zid:13,val:1,type:1},{aid:11,zid:14,val:2,type:1},{aid:12,zid:13,val:9,type:1},{aid:12,zid:14,val:4,type:1}]),3==a&&(r=[{id:"21",pname:"网元1"},{id:"22",pname:"网元1"}],s=[{id:"31",pname:"网元3"},{id:"32",pname:"网元4"}],o=[{aid:21,zid:31,val:9,type:1},{aid:21,zid:32,val:6,type:1},{aid:22,zid:31,val:3,type:1},{aid:22,zid:32,val:1,type:1}]),c=i[a-1]||[{id:""},{id:""}],l={aid:c[0].id,cityId:"",emsName:"",stationId:"",type:n[a],zid:c[1].id},console.log(l),d={},p=[],r.forEach((function(t,e){p[e]=D({},t),d[t.id]=D(D({},t),{},{index:e})})),h={},u=[],s.forEach((function(t,e){u[e]=D({},t),h[t.id]=D(D({},t),{},{index:e})})),this.xData=r.map((function(t){return t.pname})),this.yData=s.map((function(t){return t.pname})),f=[],f=o.map((function(t){return[d[t.aid].index,h[t.zid].index,t.val]})),this.inflows=f.map((function(t){return{value:t,label:{show:!1},itemStyle:{show:!0,normal:{color:"green"}}}})),this.xDataMap=d,this.yDataMap=h,this.xIndexMap=p,this.yIndexMap=u,this.valData=o,this.$nextTick((function(){if(g.charts)return g.resetChart();g.initCharts()})),e.close(),t.abrupt("return");case 34:y=t.sent,0==y.code&&this.setData(y.data),e.close(),t.next=58;break;case 39:t.prev=39,t.t0=t["catch"](30),r=[{id:"1",pname:"广东"},{id:"2",pname:"深圳"}],s=[{id:"3",pname:"佛山"},{id:"4",pname:"清远"}],o=[{aid:1,zid:3,val:1,type:1},{aid:1,zid:4,val:2,type:1},{aid:2,zid:3,val:3,type:1},{aid:2,zid:4,val:4,type:1}],d={},r.forEach((function(t,e){d[t.id]=D(D({},t),{},{index:e})})),h={},s.forEach((function(t,e){h[t.id]=D(D({},t),{},{index:e})})),this.xData=r.map((function(t){return t.pname})),this.yData=s.map((function(t){return t.pname})),f=[],f=o.map((function(t){return[d[t.aid].index,h[t.zid].index,t.val]})),this.inflows=f.map((function(t){return{value:t,label:{show:!1},itemStyle:{show:!0,normal:{color:"green"}}}})),this.xDataMap=d,this.yDataMap=h,this.valData=o,this.$nextTick((function(){g.initCharts()})),e.close();case 58:case"end":return t.stop()}}),t,this,[[30,39]])})));function e(){return t.apply(this,arguments)}return e}(),setData:function(t){t.x,t.y,t.valData},initCharts:function(){var t=this,e=this;this.charts=w.a.init(this.$refs.charts);var a=this.xData,i=this.yData,n=this.xIndexMap,r=this.yIndexMap,s={color:["#3ea50b"],title:{top:30,text:"时延矩阵",left:"center",textStyle:{color:"#555"}},grid:{bottom:100},tooltip:{position:"top",textStyle:{fontSize:14},formatter:function(t){return"【".concat(n[t.data.value[0]].pname,"】-【").concat(r[t.data.value[1]].pname,"】时延值：").concat(t.data.value[2])}},animation:!1,xAxis:{type:"category",triggerEvent:!0,data:a,splitLine:{show:!0},splitArea:{show:!1},axisLabel:{show:!0,interval:"0",rotate:45}},yAxis:{type:"category",data:i,triggerEvent:!0,splitLine:{show:!0},splitArea:{show:!1}},visualMap:{min:0,max:10,itemHeight:400,calculable:!0,orient:"horizontal",left:"center",inRange:{color:["#fff","#3ea50b"]}},series:this.computedSeries};function o(){e.charts.resize()}this.charts.setOption(s),this.charts.on("click",(function(e){var n=e.value,r=e.componentType,s=[];if("yAxis"===r){t.charts.dispatchAction({type:"downplay",seriesName:"城市-城市",dataIndex:t.yHighLight}),t.yHighLight=[];for(var o=i.indexOf(n),c=a.length*o,l=c+a.length,d=c;d<l;d++)s.push(d);t.yHighLight=s}if("xAxis"===r){t.charts.dispatchAction({type:"downplay",seriesName:"城市-城市",dataIndex:t.xHighLight}),t.xHighLight=[];for(var p=a.indexOf(n),h=a.length,u=0;u<h;u++)s.push(h*u+p);t.xHighLight=s}if(t.$nextTick((function(){})),s.length){var f=t.xHighLight.concat(t.yHighLight);if(!t.showLabel){var y=t.charts.getOption();y.series[0].data.forEach((function(t,e){f.indexOf(e)>-1&&(y.series[0].data[e].label.show=!0)})),t.charts.setOption(y),t.charts.dispatchAction({type:"highlight",seriesName:"城市-城市",dataIndex:f})}}})),this.charts.on("mouseover","series.heatmap",(function(e){t.showLabel||(t.shape=D(D({},e.event.target.shape),{},{index:e.dataIndex,value:e.data.value[2]}))})),this.charts.on("mouseout","series.heatmap",(function(){t.shape={data:""}})),this.charts.on("dblclick","series.heatmap",(function(e){t.routes.length>=3||(t.currentIndex+=1,t.routes.push([t.xIndexMap[e.value[0]],t.yIndexMap[e.value[1]]]),t.getData())})),window.addEventListener("resize",o,!1),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("resize",o,!1)}))},resetChart:function(){var t=this.charts.getOption(),e=this.xIndexMap,a=this.yIndexMap,i=this.xData,n=this.yData,r=this.computedSeries;t.xAxis[0].data=i,t.yAxis[0].data=n,t.series=r,t.tooltip[0].formatter=function(t){return"【".concat(e[t.data.value[0]].pname,"】-【").concat(a[t.data.value[1]].pname,"】时延值：").concat(t.data.value[2])},this.charts.setOption(t)}},mounted:function(){this.getData()}},S=O,I=(a("6dd4"),a("2877")),L=Object(I["a"])(S,g,m,!1,null,null,null),A=L.exports,z={name:"vlan",mixins:[],components:{chart:A},props:{},data:function(){return{}},computed:{},methods:{},created:function(){},mounted:function(){}},j=z,P=Object(I["a"])(j,f,y,!1,null,"028fecb0",null),k=P.exports;window.document.title="时延越限预警",i["default"].use(o["a"],{size:"mini"}),i["default"].prototype.$API=c["a"],i["default"].prototype.$axios=u,new i["default"]({store:s,render:function(t){return t(k)}}).$mount("#app")}});