webpackJsonp([2],{85:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(1),c=n(u),p=o(5),l=n(p);o(132);var f=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return i(t,e),s(t,[{key:"componentWillMount",value:function(){}},{key:"chooseChapter",value:function(e){this.props.chooseChapter(e)}},{key:"render",value:function(){var e=this,t=this.props.list.map(function(t,o){return c.default.createElement("li",{key:o,onClick:e.chooseChapter.bind(e,o)},o+1+". "+t.title)});return c.default.createElement("div",{className:"chapter-list"},c.default.createElement("ul",null,t))}}]),t}(u.Component);f.propTypes={list:l.default.array,chooseChapter:l.default.func},t.default=f},86:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(1),c=n(u),p=(o(15),o(5)),l=n(p),f=o(31),h=o(34),d=o(85),y=n(d),b=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),s(t,[{key:"componentWillMount",value:function(){var e=this;this.props.bookId!=this.props._bookId&&(0,h.getBookSources)(this.props.bookId).then(function(t){if(1==t.code){var o=t.data[0]._id;e.props.setBookId(o),e.getBookChapters(o)}})}},{key:"componentDidUpdate",value:function(e){}},{key:"getBookChapters",value:function(e){var t=this;(0,h.getBookChapters)(e).then(function(e){1==e.code&&t.props.setBookChapters(e.data.chapters)})}},{key:"render",value:function(){var e=JSON.parse(JSON.stringify(this.props.chapterList)),t=this.props.reverse?e.reverse():e;return c.default.createElement(y.default,{list:t,chooseChapter:this.props.chooseChapter})}}]),t}(u.Component);b.propTypes={bookId:l.default.string,_bookId:l.default.string,chapterList:l.default.array,chooseChapter:l.default.func,reverse:l.default.bool,setBookId:l.default.func,setBookChapters:l.default.func};var v=function(e){return{_bookId:e.Book._bookId,chapterList:e.Book.chapterList}},g=function(e){return{setBookChapters:function(t){e({type:"SET_BOOK_CHAPTERS",chapterList:t})},setBookId:function(t){e({type:"SET_BOOK_ID",bookId:t})}}};t.default=(0,f.connect)(v,g)(b)},101:function(e,t,o){t=e.exports=o(18)(),t.push([e.id,".chapter-list ul{padding-left:.2rem}.chapter-list ul li{border-bottom:.015rem solid #f5f5f5;height:.4rem;line-height:.4rem;padding:.2rem 0;color:#666}",""])},132:function(e,t,o){var n=o(101);"string"==typeof n&&(n=[[e.id,n,""]]);o(20)(n,{});n.locals&&(e.exports=n.locals)},251:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(1),c=n(u),p=(o(15),o(5)),l=n(p),f=o(22),h=n(f),d=o(59),y=(n(d),o(31)),b=o(34),v=o(86),g=n(v);o(587);var m=function(e){function t(e){r(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={pageInfo:"",nowPage:"",nowPageNum:0,showChapter:!1},o}return i(t,e),s(t,[{key:"componentWillMount",value:function(){this.getNowPage()}},{key:"componentDidUpdate",value:function(){this.state.pageInfo||this.getNowPage()}},{key:"getNowPage",value:function(){if(this.props.chapterList.length){var e=this.props.chapterList[this.props.params.page-1];this.getPageInfo(e)}}},{key:"getPageInfo",value:function(e,t){var o=this;document.title=e.title,(0,b.getChapters)(e.link).then(function(n){o.setState({pageInfo:n.data.chapter,nowPage:e},function(){t&&t()})})}},{key:"chooseChapter",value:function(e){var t=this.props.chapterList[e];this.getPageInfo(t,function(){document.querySelector(".page").scrollTop=0})}},{key:"showChapterWrap",value:function(){this.setState({showChapter:!this.state.showChapter})}},{key:"render",value:function(){var e=this.state.pageInfo.cpContent,t=e?("<p>"+e.replace(/\n/g,"</p><p>")+"</p>").replace(/\s+/g,""):'<p style="text-align: center;">加载中</p>';return c.default.createElement("div",{className:"page",onClick:this.showChapterWrap.bind(this)},c.default.createElement("div",{className:"container"},c.default.createElement("div",{dangerouslySetInnerHTML:{__html:t}})),c.default.createElement("div",{className:this.state.showChapter?"side-nav active":"side-nav"},this.props.params.id?c.default.createElement(g.default,{bookId:this.props.params.id,reverse:!1,chooseChapter:this.chooseChapter.bind(this)}):""))}}]),t}(u.Component);m.propTypes={chapterList:l.default.array};var _=function(e){return{chapterList:e.Book.chapterList}};t.default=(0,h.default)((0,y.connect)(_)(m))},325:function(e,t,o){t=e.exports=o(18)(),t.push([e.id,".container{font-size:.32rem;padding:.2rem}.container p{margin-bottom:.2rem;line-height:.6rem;text-indent:2em}.side-nav{position:fixed;left:0;top:0;width:60%;height:100%;overflow:scroll;background:#fff;box-shadow:.02rem 0 .08rem rgba(0,0,0,.2);transform:translateX(-101%);transition:all .3s}.side-nav.active{transform:translateX(0)}",""])},587:function(e,t,o){var n=o(325);"string"==typeof n&&(n=[[e.id,n,""]]);o(20)(n,{});n.locals&&(e.exports=n.locals)}});